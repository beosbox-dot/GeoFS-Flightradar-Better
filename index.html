<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AeroPulse - Full Flight Form</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<style>
/* üåå Reset & base */
*{margin:0;padding:0;box-sizing:border-box;font-family:'Segoe UI',sans-serif;}
body,html{width:100%;height:100%;background:linear-gradient(135deg,#0b0c10,#1a1a2e);color:#fff;overflow:hidden;}

/* üñ§ Sidebar */
#sidebar{
  width:80px;height:100vh;
  background:rgba(18,18,25,0.65);
  backdrop-filter:blur(20px);
  display:flex;flex-direction:column;align-items:center;padding:20px 0;
  position:fixed;left:0;top:0;z-index:1000;
  border-right:1px solid rgba(255,255,255,0.05);
}
#sidebar .logo{font-size:20px;font-weight:700;color:#2ca1ff;margin-bottom:30px;}
.sidebar-btn{
  width:50px;height:50px;margin:12px 0;
  background:rgba(255,255,255,0.05);
  display:flex;justify-content:center;align-items:center;
  cursor:pointer;transition:all 0.25s;position:relative;
}
.sidebar-btn:hover,.sidebar-btn.active{background:rgba(44,161,255,0.2);transform:scale(1.15);}
.sidebar-btn svg{width:24px;height:24px;fill:#bbb;transition:fill 0.25s;}
.sidebar-btn:hover svg,.sidebar-btn.active svg{fill:#2ca1ff;}

/* üó∫Ô∏è Map */
#map{position:absolute;top:0;left:80px;right:0;bottom:0;z-index:0;}

/* üíß Pop-up glassy */
#formContainer{
  display:none;position:absolute;top:0;left:80px;width:calc(100%-80px);height:100vh;
  background:rgba(18,18,28,0.65);backdrop-filter:blur(22px);
  padding:40px;overflow-y:auto;z-index:1000;
}
#formContainer.show{animation:popWaterIn 0.35s cubic-bezier(0.25,1,0.5,1) forwards;}
#formContainer.hide{animation:popWaterOut 0.35s cubic-bezier(0.25,1,0.5,1) forwards;}
@keyframes popWaterIn{0%{opacity:0;transform:scale(0.8);}60%{opacity:1;transform:scale(1.05);}100%{transform:scale(1);}}
@keyframes popWaterOut{0%{opacity:1;transform:scale(1);}100%{opacity:0;transform:scale(0.8);}}

/* ‚úàÔ∏è Flight Form */
#flightForm{
  max-width:520px;margin:0 auto;
  background:rgba(30,30,40,0.7);
  padding:30px 40px;border-radius:4px;
  box-shadow:0 12px 30px rgba(0,0,0,0.5);backdrop-filter:blur(18px);
}
#flightForm h2{text-align:center;color:#2ca1ff;font-weight:600;font-size:20px;margin-bottom:20px;}
#flightForm label{display:block;color:#ccc;margin-top:12px;font-size:14px;}
#flightForm input,#flightForm select{
  width:100%;padding:10px 12px;border:1px solid rgba(255,255,255,0.2);
  background:rgba(20,22,28,0.5);color:#fff;margin-top:6px;font-size:14px;
  transition:all 0.25s;
}
#flightForm input:focus,#flightForm select:focus{border-color:#2ca1ff;box-shadow:0 0 10px rgba(44,161,255,0.3);outline:none;}
#flightForm button{
  width:100%;padding:12px;margin-top:20px;border:none;background:#2ca1ff;color:#fff;font-size:15px;font-weight:600;cursor:pointer;
  transition:0.25s, transform 0.2s;
}
#flightForm button:hover{background:#1b8de0;transform:translateY(-2px);}

/* üé´ Ticket */
#ticket{
  margin-top:20px;background:rgba(20,22,28,0.8);
  padding:20px;color:#fff;border-left:4px solid #2ca1ff;
  display:none;font-size:14px;
}

/* üåÄ Scrollbar */
#formContainer::-webkit-scrollbar{width:10px;}
#formContainer::-webkit-scrollbar-thumb{background:rgba(100,100,100,0.4);}
#formContainer::-webkit-scrollbar-thumb:hover{background:rgba(180,180,180,0.5);}
</style>
</head>
<body>

<!-- Sidebar -->
<div id="sidebar">
  <div class="logo">Aero</div>
  <div class="sidebar-btn" id="homeBtn"><svg viewBox="0 0 24 24"><path d="M3 11L12 2l9 9v11a1 1 0 0 1-1 1h-6v-6h-4v6H4a1 1 0 0 1-1-1V11z"/></svg></div>
  <div class="sidebar-btn" id="newFlightBtn"><svg viewBox="0 0 24 24"><path d="M2.5 19.5l19-7-19-7v4l14 3-14 3v4z"/></svg></div>
  <div class="sidebar-btn" id="trafficBtn"><svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" stroke="#fff" stroke-width="2" fill="none"/><path d="M12 2a10 10 0 0 1 0 20"/></svg></div>
</div>

<!-- Map -->
<div id="map"></div>

<!-- Form Container -->
<div id="formContainer">
<form id="flightForm">
  <h2>New Flight Plan</h2>
  <label>Departure Airport</label>
  <input type="text" id="departure" placeholder="e.g. JFK" required>
  <label>Arrival Airport</label>
  <input type="text" id="arrival" placeholder="e.g. LAX" required>
  <label>Callsign</label>
  <input type="text" id="callsign" placeholder="Flight number" required>
  <label>Select Aircraft</label>
  <select id="aircraft">
    <option value="A320">Airbus A320</option>
    <option value="B737">Boeing 737</option>
    <option value="B777">Boeing 777</option>
    <option value="A380">Airbus A380</option>
    <option value="A350">Airbus A350</option>
    <option value=‚ÄúB787‚Äù>Boeing B787</option>
    <option value=‚ÄúA321‚Äù>Airbus A321</option>
    <option value=‚ÄúA330‚Äù>Airbus A330</option>
  </select>
  <button type="submit">Load Flight</button>
  <div id="ticket"></div>
</form>
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
// ===== Map =====
const map = L.map('map',{minZoom:3,maxZoom:15,zoomControl:true}).setView([20,0],2);
L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png',{
  attribution:'&copy; OpenStreetMap, CARTO', subdomains:'abcd', maxZoom:19
}).addTo(map);

// Airport positions (demo dataset, c·∫ßn full dataset th·∫ø gi·ªõi)
const airports = {"JFK":[40.6413,-73.7781],"LAX":[33.9416,-118.4085],"CDG":[49.0097,2.5479],"HND":[35.5494,139.7798],"ATL":[33.6407,-84.4277], "PEK":[40.0799,116.6031], "LAX":[33.9416,-118.4085], "DXB":[25.2532,55.3657], "HND":[35.5494,139.7798],
  "ORD":[41.9742,-87.9073], "LHR":[51.4700,-0.4543], "PVG":[31.1443,121.8083], "CDG":[49.0097,2.5479], "DFW":[32.8998,-97.0403],
  "AMS":[52.3105,4.7683], "FRA":[50.0379,8.5622], "IST":[41.2753,28.7519], "CAN":[23.3924,113.2988], "SIN":[1.3644,103.9915],
  "ICN":[37.4602,126.4407], "DEN":[39.8561,-104.6737], "BKK":[13.6811,100.7473], "JFK":[40.6413,-73.7781], "SFO":[37.6213,-122.3790],
  "KUL":[2.7456,101.7072], "MAD":[40.4983,-3.5676], "BCN":[41.2974,2.0833], "SYD":[-33.9399,151.1753], "YYZ":[43.6777,-79.6248],
  "MIA":[25.7959,-80.2870], "MUC":[48.3538,11.7861], "FCO":[41.8003,12.2389], "EWR":[40.6895,-74.1745], "LAS":[36.0840,-115.1537],
  "SEA":[47.4502,-122.3088], "SVO":[55.9726,37.4146], "MEX":[19.4361,-99.0719], "GRU":[-23.4356,-46.4731], "ORD":[41.9742,-87.9073],
  "HKG":[22.3080,113.9185], "SHA":[31.2000,121.3367], "BOM":[19.0896,72.8656], "DEL":[28.5562,77.1000], "NRT":[35.7720,140.3929],
  "LGW":[51.1537,-0.1821], "BRU":[50.9010,4.4859], "CPH":[55.6179,12.6561], "OSL":[60.1939,11.1004], "HEL":[60.3172,24.9633],
  "VIE":[48.1103,16.5697], "ZRH":[47.4581,8.5491], "DUB":[53.4213,-6.2701], "MEL":[-37.6733,144.8433], "AKL":[-37.0081,174.7918],
  "DOH":[25.2617,51.5657], "AUH":[24.4328,54.6510], "SHA":[31.2000,121.3367], "CGK":[-6.1256,106.6559], "MNL":[14.5086,121.0194],"SVO":[55.9726,37.4146], "MEX":[19.4361,-99.0719], "GRU":[-23.4356,-46.4731], "HKG":[22.3080,113.9185], "SHA":[31.2000,121.3367],
  "BOM":[19.0896,72.8656], "DEL":[28.5562,77.1000], "NRT":[35.7720,140.3929], "LGW":[51.1537,-0.1821], "BRU":[50.9010,4.4859],
  "CPH":[55.6179,12.6561], "OSL":[60.1939,11.1004], "HEL":[60.3172,24.9633], "VIE":[48.1103,16.5697], "ZRH":[47.4581,8.5491],
  "DUB":[53.4213,-6.2701], "MEL":[-37.6733,144.8433], "AKL":[-37.0081,174.7918], "DOH":[25.2617,51.5657], "AUH":[24.4328,54.6510],
  "CGK":[-6.1256,106.6559], "MNL":[14.5086,121.0194], "MAN":[53.3651,-2.2721], "LIS":[38.7742,-9.1342], "FCO":[41.8003,12.2389],
  "MXP":[45.6300,8.7231], "CDG":[49.0097,2.5479], "ORY":[48.7233,2.3797], "TLV":[32.0114,34.8867], "JNB":[-26.1337,28.2420],
  "CPT":[-33.9698,18.5972], "BUE":[-34.8222,-58.5358], "EZE":[-34.8222,-58.5358], "BOG":[4.7016,-74.1469], "LIM":[-12.0219,-77.1143],
  "SCL":[-33.3930,-70.7858], "GRX":[37.1880,-3.7779], "ATH":[37.9364,23.9445], "SOF":[42.6957,23.4060], "IST":[41.2753,28.7519],
  "SAW":[40.8986,29.3093], "BUD":[47.4369,19.2554], "PRG":[50.1008,14.2608], "WAW":[52.1657,20.9671], "OSL":[60.1939,11.1004],
  "ARN":[59.6519,17.9186], "CPH":[55.6179,12.6561], "HEL":[60.3172,24.9633], "KEF":[63.9850,-22.6056], "DME":[55.4088,37.9063],
  "VKO":[55.5920,37.2619], "LED":[59.8003,30.2625], "DXB":[25.2532,55.3657], "AUH":[24.4328,54.6510], "DOH":[25.2617,51.5657],
  "RUH":[24.9560,46.6980], "JED":[21.6796,39.1563], "CAI":[30.1216,31.4053], "CMN":[33.3675,-7.5898], "RAK":[31.6086,-8.0364],
  "NBO":[-1.3192,36.9275], "ACC":[5.6052,-0.1668], "LUN":[-15.3300,28.4522], "LOS":[6.5773,3.3212], "ABV":[9.0060,7.2636],
  "KRT":[15.5895,32.5533], "ADD":[8.9779,38.7993], "DAR":[-6.8788,39.2026], "ZNZ":[-6.2223,39.2245], "MCT":[23.5936,58.2844],
  "AUH":[24.4328,54.6510], "DOH":[25.2617,51.5657], "BOM":[19.0896,72.8656], "DEL":[28.5562,77.1000], "BLR":[13.1986,77.7066],
  "CCU":[22.6547,88.4467], "MAA":[12.9941,80.1709], "COK":[10.1520,76.4019], "KTM":[27.6966,85.3594], "DAC":[23.8437,90.3973],
  "RGN":[16.9070,96.1334], "HAN":[21.2181,105.8049], "SGN":[10.8183,106.6512], "MFM":[22.1491,113.5925], "HKG":[22.3080,113.9185],
  "TPE":[25.0777,121.2325], "KIX":[34.4347,135.2441], "CTS":[42.7752,141.6922], "ICN":[37.4602,126.4407], "GMP":[37.5580,126.8340],"FRA":[50.0379,8.5622], "MUC":[48.3538,11.7861], "TXL":[52.5597,13.2877], "DUS":[51.2895,6.7668], "CGN":[50.8659,7.1427],
  "HAM":[53.6304,9.9882], "STN":[51.8850,0.2350], "EDI":[55.9500,-3.3725], "GLA":[55.8711,-4.4331], "BFS":[54.6186,-6.2192],
  "RIX":[56.9236,23.9711], "TLL":[59.4133,24.8328], "VNO":[54.6341,25.2851], "RIX":[56.9236,23.9711], "KBP":[50.3450,30.8947],
  "IEV":[50.4017,30.4517], "ODS":[46.4260,30.6769], "SVO":[55.9726,37.4146], "DME":[55.4088,37.9063], "VKO":[55.5920,37.2619],
  "LED":[59.8003,30.2625], "AYT":[36.8980,30.8000], "DLM":[36.7131,28.7929], "BJV":[37.2466,27.6784], "ESB":[39.8650,32.7116],
  "ADB":[38.3069,27.1566], "SAW":[40.8986,29.3093], "IZM":[38.2928,27.1564], "TAS":[40.2052,44.2518], "GYD":[40.4669,50.0464],
  "TBS":[41.6692,44.9545], "KUT":[42.1766,42.4824], "BEG":[44.8181,20.3091], "TGD":[42.3596,19.2514], "PRN":[42.5726,21.0355],
  "SKP":[41.9614,21.6217], "SOF":[42.6957,23.4060], "PDV":[44.0320,21.1489], "OTP":[44.5726,26.1039], "CLJ":[46.7853,23.6863],
  "TSR":[45.8091,21.3346], "AAE":[36.8229,7.8096], "ALG":[36.6916,3.2158], "ORN":[35.6659,-0.6431], "TUN":[36.8510,10.2270],
  "MIR":[36.8190,10.2765], "NBE":[37.5655,10.7563], "RAK":[31.6086,-8.0364], "CMN":[33.3675,-7.5898], "RAK":[31.6086,-8.0364],
  "DMM":[26.4710,49.7987], "RUH":[24.9560,46.6980], "JED":[21.6796,39.1563], "MED":[24.5535,39.7058], "ELQ":[26.3020,43.7730],
  "TIF":[36.7700,4.4447], "GZT":[37.1641,37.2386], "MQS":[-1.6222,39.6611], "ZNZ":[-6.2223,39.2245], "DAR":[-6.8788,39.2026],
  "JRO":[-3.4290,37.0740], "NBO":[-1.3192,36.9275], "EBB":[0.0424,32.4433], "KGL":[-1.9686,30.1390], "LOS":[6.5773,3.3212],
  "ABV":[9.0060,7.2636], "PHC":[5.2800,-3.9261], "ACC":[5.6052,-0.1668], "LFW":[6.1370,1.2120], "BKO":[12.5336,-7.9492],
  "DKR":[14.7393,-17.4900], "GAB":[0.3833,9.4500], "BJM":[-3.3668,29.3197], "MSU":[-4.0086,21.7595], "FIH":[-4.3854,15.4446],
  "KGL":[-1.9686,30.1390], "NIM":[13.4811,2.1839], "DKR":[14.7393,-17.4900], "MRU":[-20.4300,57.6833], "RUN":[-20.8850,55.5100],
  "FNA":[8.6167,-13.1950], "ROB":[5.3450,-10.6700], "BJL":[13.3386,-16.6525], "DLA":[4.0067,9.7197], "LOS":[6.5773,3.3212],
  "PHC":[5.2800,-3.9261], "NIM":[13.4811,2.1839], "BKO":[12.5336,-7.9492], "OUA":[12.3533,-1.5128], "KRT":[15.5895,32.5533],"FRA":[50.0379,8.5622], "MUC":[48.3538,11.7861], "TXL":[52.5597,13.2877], "DUS":[51.2895,6.7668], "CGN":[50.8659,7.1427],
  "HAM":[53.6304,9.9882], "STN":[51.8850,0.2350], "EDI":[55.9500,-3.3725], "GLA":[55.8711,-4.4331], "BFS":[54.6186,-6.2192],
  "RIX":[56.9236,23.9711], "TLL":[59.4133,24.8328], "VNO":[54.6341,25.2851], "RIX":[56.9236,23.9711], "KBP":[50.3450,30.8947],
  "IEV":[50.4017,30.4517], "ODS":[46.4260,30.6769], "SVO":[55.9726,37.4146], "DME":[55.4088,37.9063], "VKO":[55.5920,37.2619],
  "LED":[59.8003,30.2625], "AYT":[36.8980,30.8000], "DLM":[36.7131,28.7929], "BJV":[37.2466,27.6784], "ESB":[39.8650,32.7116],
  "ADB":[38.3069,27.1566], "SAW":[40.8986,29.3093], "IZM":[38.2928,27.1564], "TAS":[40.2052,44.2518], "GYD":[40.4669,50.0464],
  "TBS":[41.6692,44.9545], "KUT":[42.1766,42.4824], "BEG":[44.8181,20.3091], "TGD":[42.3596,19.2514], "PRN":[42.5726,21.0355],
  "SKP":[41.9614,21.6217], "SOF":[42.6957,23.4060], "PDV":[44.0320,21.1489], "OTP":[44.5726,26.1039], "CLJ":[46.7853,23.6863],
  "TSR":[45.8091,21.3346], "AAE":[36.8229,7.8096], "ALG":[36.6916,3.2158], "ORN":[35.6659,-0.6431], "TUN":[36.8510,10.2270],
  "MIR":[36.8190,10.2765], "NBE":[37.5655,10.7563], "RAK":[31.6086,-8.0364], "CMN":[33.3675,-7.5898], "RAK":[31.6086,-8.0364],
  "DMM":[26.4710,49.7987], "RUH":[24.9560,46.6980], "JED":[21.6796,39.1563], "MED":[24.5535,39.7058], "ELQ":[26.3020,43.7730],
  "TIF":[36.7700,4.4447], "GZT":[37.1641,37.2386], "MQS":[-1.6222,39.6611], "ZNZ":[-6.2223,39.2245], "DAR":[-6.8788,39.2026],
  "JRO":[-3.4290,37.0740], "NBO":[-1.3192,36.9275], "EBB":[0.0424,32.4433], "KGL":[-1.9686,30.1390], "LOS":[6.5773,3.3212],
  "ABV":[9.0060,7.2636], "PHC":[5.2800,-3.9261], "ACC":[5.6052,-0.1668], "LFW":[6.1370,1.2120], "BKO":[12.5336,-7.9492],
  "DKR":[14.7393,-17.4900], "GAB":[0.3833,9.4500], "BJM":[-3.3668,29.3197], "MSU":[-4.0086,21.7595], "FIH":[-4.3854,15.4446],
  "KGL":[-1.9686,30.1390], "NIM":[13.4811,2.1839], "DKR":[14.7393,-17.4900], "MRU":[-20.4300,57.6833], "RUN":[-20.8850,55.5100],
  "FNA":[8.6167,-13.1950], "ROB":[5.3450,-10.6700], "BJL":[13.3386,-16.6525], "DLA":[4.0067,9.7197], "LOS":[6.5773,3.3212],
  "PHC":[5.2800,-3.9261], "NIM":[13.4811,2.1839], "BKO":[12.5336,-7.9492], "OUA":[12.3533,-1.5128], "KRT":[15.5895,32.5533],"LHR":[51.4700,-0.4543], "LGW":[51.1537,-0.1821], "STN":[51.8850,0.2350], "LCY":[51.5053,0.0553], "MAN":[53.3651,-2.2728],
  "BHX":[52.4500,-1.7480], "GLA":[55.8711,-4.4331], "EDI":[55.9500,-3.3725], "ABZ":[57.2010,-2.2030], "BRS":[51.3820,-2.7190],
  "DUB":[53.4213,-6.2701], "CDG":[49.0097,2.5479], "ORY":[48.7262,2.3652], "NCE":[43.6584,7.2159], "LYS":[45.7256,5.0811],
  "MRS":[43.4396,5.2219], "TLS":[43.6293,1.3630], "BCN":[41.2974,2.0833], "MAD":[40.4983,-3.5676], "AGP":[36.6749,-4.4991],
  "VLC":[39.4893,-0.4810], "SVQ":[37.4186,-5.8930], "BIO":[43.3017,-2.9108], "FCO":[41.8003,12.2389], "MXP":[45.6301,8.7231],
  "VCE":[45.5051,12.3519], "BGY":[45.6690,9.7003], "TRN":[45.2000,7.6490], "PMO":[38.1753,13.0914], "CTA":[37.4668,15.0675],
  "AMS":[52.3105,4.7683], "RTM":[51.9550,4.4375], "BRU":[50.9014,4.4844], "CRL":[50.4590,4.4539], "ZRH":[47.4647,8.5492],
  "GVA":[46.2381,6.1086], "BSL":[47.5990,7.5292], "FRA":[50.0379,8.5622], "MUC":[48.3538,11.7861], "TXL":[52.5597,13.2877],
  "DUS":[51.2895,6.7668], "CGN":[50.8659,7.1427], "HAM":[53.6304,9.9882], "VIE":[48.1103,16.5697], "SZG":[47.7935,13.0040],
  "GOT":[57.6667,12.2792], "ARN":[59.6519,17.9186], "CPH":[55.6181,12.6561], "BLL":[55.7400,12.5200], "OSL":[60.1939,11.1004],
  "TRF":[59.1860,10.2583], "BGO":[60.2932,5.2180], "SVG":[59.8887,10.2625], "HEL":[60.3172,24.9633], "TKU":[60.5236,22.2622],
  "LIS":[38.7742,-9.1342], "OPO":[41.2481,-8.6810], "FAO":[37.0141,-7.9653], "PDL":[37.7412,-25.6970], "FNC":[32.6985,-16.7740],
  "ATH":[37.9364,23.9445], "SKG":[40.5195,22.9705], "HER":[35.3391,25.1801], "CHQ":[35.5311,24.1490], "CFU":[39.6019,19.9117],
  "MLA":[35.8575,14.4775], "TIA":[41.4144,19.7208], "PRN":[42.5726,21.0355], "TGD":[42.3596,19.2514], "BEG":[44.8181,20.3091],
  "SJJ":[43.8246,18.3317], "ZAG":[45.7429,16.0688], "SPU":[43.5381,16.2971], "DBV":[44.1190,17.8270], "LJU":[46.2236,14.4576],
  "BRI":[40.6398,17.9366], "NAP":[40.8860,14.2909], "PSA":[43.6830,10.3920], "FLR":[43.8109,11.2053], "BLQ":[44.5350,11.2889],
  "VRN":[45.3952,10.8887], "TRS":[45.8272,13.4725], "VCE":[45.5051,12.3519], "BGY":[45.6690,9.7003], "MXP":[45.6301,8.7231],
  "MRS":[43.4396,5.2219], "NCE":[43.6584,7.2159], "TLS":[43.6293,1.3630], "ORY":[48.7262,2.3652], "CDG":[49.0097,2.5479],
  "DUS":[51.2895,6.7668], "FRA":[50.0379,8.5622], "MUC":[48.3538,11.7861], "ZRH":[47.4647,8.5492], "GVA":[46.2381,6.1086],
  "VIE":[48.1103,16.5697], "OSL":[60.1939,11.1004], "ARN":[59.6519,17.9186], "CPH":[55.6181,12.6561], "HEL":[60.3172,24.9633],
  "STO":[59.6519,17.9186], "MKE":[52.3667,4.8945], "BUD":[47.4369,19.2556], "PRG":[50.1008,14.2632], "WAW":[52.1657,20.9671],
  "KRK":[50.0777,19.7841], "LJU":[46.2236,14.4576], "ZAG":[45.7429,16.0688], "SJJ":[43.8246,18.3317], "SKG":[40.5195,22.9705],
  "ATH":[37.9364,23.9445], "MLA":[35.8575,14.4775], "VCE":[45.5051,12.3519], "TRN":[45.2000,7.6490], "BGY":[45.6690,9.7003],
  "BLQ":[44.5350,11.2889], "VRN":[45.3952,10.8887], "NAP":[40.8860,14.2909], "PSA":[43.6830,10.3920], "FLR":[43.8109,11.2053],"NRT":[35.7720,140.3929], "HND":[35.5494,139.7798], "KIX":[34.4347,135.2442], "ITM":[34.7855,135.4382], "CTS":[42.7752,141.6923],
  "FUK":[33.5869,130.4511], "NGO":[35.2522,136.9236], "OKA":[26.1958,127.6461], "SDJ":[38.1393,140.9170], "KOJ":[31.8034,130.7188],
  
  // üá∏üá¨ Singapore
  "SIN":[1.3644,103.9915], 

  // üá≤üáæ Malaysia
  "KUL":[2.7456,101.7093], "PEN":[5.2971,100.2774], "BKI":[5.9375,116.0513], "LGK":[6.3561,99.7286], "SZB":[3.1339,101.6865],

  // üáÆüá© Indonesia
  "CGK":[-6.1256,106.6559], "DPS":[-8.7481,115.1675], "SUB":[-7.3793,112.7861], "UPG":[-5.0669,119.5547], "BPN":[-1.2686,116.8947],
  "BDO":[-6.9006,107.5761], "KNO":[3.6428,98.8855], "LOP":[-8.7578,115.1770], "PLM":[-2.9108,104.7456], "SOC":[-6.9161,110.5894],

  // üáπüá≠ Thailand
  "BKK":[13.6900,100.7501], "DMK":[13.9125,100.6071], "CNX":[18.7700,98.9690], "HKT":[8.1130,98.3160], "USM":[9.5472,100.0625],
  
  // üáªüá≥ Vietnam
  "SGN":[10.8188,106.6520], "HAN":[21.2181,105.8050], "DAD":[16.0414,108.1987], "CXR":[12.0069,109.2350], "VCA":[10.5793,106.6625],
  
  // üáµüá≠ Philippines
  "MNL":[14.5086,121.0193], "CEB":[10.3076,123.9794], "DVO":[7.1258,125.6462], "ILO":[10.7194,122.5583], "ZAM":[8.1167,124.5344],
  
  // üáßüá≥ Brunei
  "BWN":[4.9442,114.9281],
  
  // üá∞üá≠ Cambodia
  "PNH":[11.5466,104.8446], "REP":[13.4100,103.8130], 
  
  // üá±üá¶ Laos
  "VTE":[17.9889,102.5631], "LPQ":[19.9125,102.1611], "XKH":[18.2069,103.6406],
  
  // üá≤üá≤ Myanmar
  "RGN":[16.9073,96.1333], "MDL":[21.7020,95.9772], "MGZ":[20.4833,94.9333]};
let flightLayer = null;

// Sidebar interactions
const formContainer=document.getElementById('formContainer');
document.getElementById('newFlightBtn').addEventListener('click',()=>{formContainer.classList.remove('hide');formContainer.classList.add('show');formContainer.style.display='block';});
document.getElementById('homeBtn').addEventListener('click',()=>{formContainer.classList.remove('show');formContainer.classList.add('hide');setTimeout(()=>formContainer.style.display='none',350);});
document.getElementById('trafficBtn').addEventListener('click',()=>{formContainer.classList.remove('show');formContainer.classList.add('hide');setTimeout(()=>formContainer.style.display='none',350);});

// Flight form submit
document.getElementById('flightForm').addEventListener('submit',e=>{
  e.preventDefault();
  const dep=document.getElementById('departure').value.toUpperCase();
  const arr=document.getElementById('arrival').value.toUpperCase();
  const callsign=document.getElementById('callsign').value.toUpperCase();
  const aircraft=document.getElementById('aircraft').value;

  if(!airports[dep]||!airports[arr]){alert("Airport not found!");return;}
  const depPos=airports[dep],arrPos=airports[arr];

  if(flightLayer) map.removeLayer(flightLayer);
  flightLayer=L.polyline([depPos,arrPos],{color:'#2ca1ff',weight:4,opacity:0.9,dashArray:'8,6'}).addTo(map);
  flightLayer.bindPopup(`<b>Callsign:</b>${callsign}<br><b>Aircraft:</b>${aircraft}<br><b>Departure:</b>${dep}<br><b>Arrival:</b>${arr}`);
  map.fitBounds(flightLayer.getBounds(),{padding:[50,50]});

  const ticket=document.getElementById('ticket');
  ticket.innerHTML=`<b>Flight:</b>${callsign}<br><b>Aircraft:</b>${aircraft}<br><b>From:</b>${dep}<br><b>To:</b>${arr}`;
  ticket.style.display='block';
});
</script>
</body>
</html>
